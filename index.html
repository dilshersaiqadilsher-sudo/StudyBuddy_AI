<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultra Smart AI Friend</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#020617">

<style>
*{box-sizing:border-box;font-family:Segoe UI,Arial,sans-serif}
body{
  margin:0;height:100vh;
  background:linear-gradient(135deg,#020617,#0f172a);
  display:flex;align-items:center;justify-content:center;color:#fff
}
.app{
  width:420px;max-width:95%;height:650px;
  background:#020617;border-radius:18px;
  box-shadow:0 0 40px rgba(0,0,0,.8);
  display:flex;flex-direction:column;overflow:hidden
}
.header{
  padding:14px;text-align:center;
  background:linear-gradient(90deg,#2563eb,#38bdf8);
  font-size:18px;font-weight:600
}
.sub{font-size:12px;opacity:.9}
.chat{flex:1;padding:14px;overflow-y:auto}
.msg{
  max-width:85%;padding:12px 14px;margin-bottom:12px;
  border-radius:14px;font-size:14px;line-height:1.4
}
.user{margin-left:auto;background:#2563eb;border-bottom-right-radius:4px}
.bot{background:#1f2937;border-bottom-left-radius:4px}
.footer{display:flex;gap:8px;padding:10px;background:#020617}
input{
  flex:1;padding:12px;border-radius:12px;
  border:none;outline:none;background:#0f172a;color:#fff
}
button{
  width:48px;border-radius:12px;border:none;
  background:#22c55e;font-size:18px;cursor:pointer
}
</style>
</head>

<body>

<div class="app">
  <div class="header">
    Ultra Smart AI Friend
    <div class="sub" id="date"></div>
  </div>
  <div class="chat" id="chat"></div>
  <div class="footer">
    <input id="input" placeholder="Ask anything like ChatGPT..." />
    <button onclick="send()">â–¶</button>
  </div>
</div>

<script>
/* ===== UI + AI ===== */
const chat=document.getElementById("chat");
const input=document.getElementById("input");
document.getElementById("date").innerText="Today is "+new Date().toLocaleDateString();
let memory=JSON.parse(localStorage.getItem("ai_memory")||"[]");

function addMsg(t,c){
  const d=document.createElement("div");
  d.className="msg "+c;
  d.innerText=t;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}
function saveMemory(q,a){
  memory.push({q,a});
  if(memory.length>200) memory.shift();
  localStorage.setItem("ai_memory",JSON.stringify(memory));
}
function smartAI(q){
  const l=q.toLowerCase();
  for(let m of memory){if(m.q===q) return "You asked this before:\n\n"+m.a}
  if(l.includes("who made you")) return "I was created using pure HTML, CSS, and JavaScript as a smart web app.";
  if(l.includes("how are you")) return "Iâ€™m always active and learning. I never get tired.";
  if(l.includes("who are you")) return "I am Ultra Smart AI Friend â€” a ChatGPT-style offline web app.";
  if(l.includes("future")) return "The future of AI is collaboration with humans.";
  if(l.includes("hi")||l.includes("hello")) return "Hello ðŸ‘‹ Ask me anything.";
  return "Thatâ€™s an interesting question. Iâ€™ll always try to help you thoughtfully.";
}
function send(){
  const t=input.value.trim(); if(!t) return;
  addMsg(t,"user"); input.value="";
  setTimeout(()=>{
    const a=smartAI(t);
    addMsg(a,"bot"); saveMemory(t,a);
  },400);
}
input.addEventListener("keydown",e=>{if(e.key==="Enter")send()});
addMsg("Hello ðŸ‘‹ I am Ultra Smart AI Friend.","bot");

/* ===== SINGLE-FILE PWA ===== */
const manifest={
  name:"Ultra Smart AI Friend",
  short_name:"UltraAI",
  start_url:".",
  display:"standalone",
  background_color:"#020617",
  theme_color:"#020617",
  icons:[{
    src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAF0lEQVR42u3BAQ0AAADCIPunNsN+YAAAAABJRU5ErkJggg==",
    sizes:"192x192",
    type:"image/png"
  }]
};
const mBlob=new Blob([JSON.stringify(manifest)],{type:"application/json"});
const mURL=URL.createObjectURL(mBlob);
const link=document.createElement("link");
link.rel="manifest"; link.href=mURL; document.head.appendChild(link);

if("serviceWorker" in navigator){
  const swCode=`
  self.addEventListener("install",e=>{
    e.waitUntil(caches.open("ultra-ai").then(c=>c.addAll(["./"])));
    self.skipWaiting();
  });
  self.addEventListener("fetch",e=>{
    e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)));
  });
  `;
  const swBlob=new Blob([swCode],{type:"text/javascript"});
  navigator.serviceWorker.register(URL.createObjectURL(swBlob));
}
</script>

</body>
</html>
