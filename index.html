<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultra Smart AI Friend âš¡ Ultimate</title>

<style>
:root{
  --bg:#020617;
  --card:#0f172a;
  --user:#2563eb;
  --bot:#1e293b;
  --text:#e5e7eb;
  --accent:#22c55e;
}
.light{
  --bg:#f1f5f9;
  --card:#ffffff;
  --user:#2563eb;
  --bot:#e5e7eb;
  --text:#020617;
}
*{box-sizing:border-box;font-family:system-ui}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--text);
}
.app{
  width:380px;
  height:650px;
  background:var(--card);
  border-radius:18px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.header{
  background:linear-gradient(135deg,#2563eb,#38bdf8);
  color:white;
  padding:10px;
  text-align:center;
}
.topbar{
  display:flex;
  justify-content:space-between;
  padding:6px;
}
.topbar button{
  border:none;
  border-radius:8px;
  padding:6px 8px;
  font-size:12px;
  cursor:pointer;
}
.chat{
  flex:1;
  padding:10px;
  overflow-y:auto;
}
.msg{
  padding:10px;
  border-radius:12px;
  margin-bottom:8px;
  max-width:85%;
  white-space:pre-wrap;
}
.user{background:var(--user);color:white;margin-left:auto}
.bot{background:var(--bot)}
.inputbar{
  display:flex;
  gap:6px;
  padding:8px;
}
input{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:none;
}
button.send{
  background:var(--accent);
  border:none;
  border-radius:10px;
  padding:0 14px;
  color:white;
}
.hidden{display:none}
.modebar{
  display:flex;
  gap:4px;
  padding:6px;
}
.modebar button{
  flex:1;
  border:none;
  border-radius:8px;
  font-size:12px;
  padding:6px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="app" id="loginBox">
  <div class="header">Welcome ðŸ‘‹</div>
  <div style="padding:20px;text-align:center">
    <p>Enter your name</p>
    <input id="nameInput" placeholder="Your name">
    <br><br>
    <button onclick="login()" class="send">Start</button>
  </div>
</div>

<!-- APP -->
<div class="app hidden" id="chatBox">
  <div class="header">
    <span id="userName"></span>
  </div>

  <div class="topbar">
    <button onclick="toggleTheme()">ðŸŽ¨ Theme</button>
    <button onclick="exportChat()">ðŸ“¤ Export</button>
    <button onclick="logout()">ðŸšª Logout</button>
  </div>

  <div class="modebar">
    <button onclick="setMode('chat')">ðŸ’¬ Chat</button>
    <button onclick="setMode('math')">ðŸ§® Math</button>
    <button onclick="setMode('study')">ðŸ“˜ Study</button>
  </div>

  <div class="chat" id="chat"></div>

  <div class="inputbar">
    <input id="input" placeholder="Ask somethingâ€¦">
    <button class="send" onclick="send()">â–¶</button>
  </div>
</div>

<script>
let mode="chat";
let messages=[];

const chat=document.getElementById("chat");
const input=document.getElementById("input");

/* LOGIN */
function login(){
  const n=document.getElementById("nameInput").value.trim();
  if(!n) return alert("Enter name");
  localStorage.setItem("user",n);
  start();
}
function logout(){
  localStorage.clear();
  location.reload();
}
function start(){
  const n=localStorage.getItem("user");
  if(!n) return;
  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("chatBox").classList.remove("hidden");
  document.getElementById("userName").innerText="ðŸ‘¤ "+n;
  addMsg("Hello "+n+"! Mode: "+mode.toUpperCase(),"bot");
}
if(localStorage.getItem("user")) start();

/* UI */
function addMsg(t,r){
  const d=document.createElement("div");
  d.className="msg "+r;
  d.textContent=t;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
  messages.push(r.toUpperCase()+": "+t);
}

/* MODE */
function setMode(m){
  mode=m;
  addMsg("Mode changed to "+m.toUpperCase(),"bot");
}

/* BRAIN */
function solveMath(q){
  try{
    if(/^[0-9+\-*/(). %]+$/.test(q)) return eval(q);
  }catch{}
  return null;
}
function brain(q){
  if(mode==="math"){
    const r=solveMath(q);
    return r!==null ? "Answer: "+r : "Invalid math";
  }
  if(mode==="study"){
    if(q.includes("science")) return "Science studies nature and experiments.";
    if(q.includes("history")) return "History studies past events.";
    if(q.includes("geography")) return "Geography studies Earth and maps.";
    if(q.includes("english")) return "English is a global language.";
    return "Ask Science, History, Geography, or English.";
  }
  return "You said: "+q;
}

/* SEND */
function send(){
  const t=input.value.trim();
  if(!t) return;
  addMsg(t,"user");
  input.value="";
  setTimeout(()=>addMsg(brain(t.toLowerCase()),"bot"),300);
}
input.addEventListener("keydown",e=>e.key==="Enter"&&send());

/* EXTRA */
function toggleTheme(){document.body.classList.toggle("light")}
function exportChat(){
  const b=new Blob([messages.join("\n")],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(b);
  a.download="chat.txt";
  a.click();
}
</script>

</body>
</html>
